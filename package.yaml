name:                paper
version:             0.1.0.0
github:              "conal/convolution-paper"
license:             BSD3
author:              "Conal Elliott"
maintainer:          "conal@conal.net"
copyright:           "2018 Conal Elliott"

synopsis:            Language recognition in the spirit of Brzowski's derivatives
category:            language, math

description:         Please see the README on GitHub at <https://github.com/conal/convolution-paper#readme>

default-extensions:
  - AllowAmbiguousTypes
  - CPP
  - ConstraintKinds
  - DefaultSignatures
  - DeriveFoldable
  - DeriveFunctor
  - FlexibleContexts
  - FlexibleInstances
  - FunctionalDependencies
  - GADTs
  - GeneralizedNewtypeDeriving
  - LambdaCase
  - MultiParamTypeClasses
  - OverloadedStrings  # for Poly, since dante doesn't pick up
  - PatternSynonyms
  - QuantifiedConstraints
  - RankNTypes
  - StandaloneDeriving
  - TypeApplications
  - TypeFamilies
  - TypeOperators
  - UndecidableInstances
  - ViewPatterns
  - ScopedTypeVariables

ghc-options:
  -Wall
  # -Wno-type-defaults   # for Poly, since dante doesn't pick up

cpp-options: -DEXAMPLES

library:
  dependencies:
    - base >= 4.7 && < 5
    - ghc-prim
    - data-inttrie
    - MemoTrie
    - containers
    - multiset
    # For Image
    - vector
    - vector-sized
    - JuicyPixels
    # - total-map
    # - distributive
    # - adjunctions
    # - comonad
    # - semiring-num
    # - newtype-generics
  other-modules: []
  include-dirs: src
  install-includes: GenInstances.inc
  source-dirs: src
  exposed-modules:
    - Misc
    - Constrained
    - Semi
    - RegExp
    - LTrie
    - MMap
    - Poly
    - Examples
    - Image

tests:
  test:
    source-dirs:         test
    main:                GoldTests.hs
    other-modules: []
    dependencies:
    - base
    - Cabal >= 1.24.0.0
    - containers
    - bytestring
    - tasty
    - tasty-golden
    # - semiring-num
    # - MemoTrie
    - paper

benchmarks:
  bench:
    source-dirs:         test
    main:                Benchmark.hs
    other-modules: []
    dependencies:
    - base
    - Cabal >= 1.24.0.0
    - containers
    - criterion
    - directory
    - deepseq
    - MemoTrie
    - paper
  # ghc-options: -O

# stack bench
